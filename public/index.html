<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Legal Reviews Dashboard (CZ)</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <header class="header">
    <div class="title">
      <h1>Legal Reviews Dashboard (CZ)</h1>
      <p class="muted">Zdroj: public/meta.json (merged_dataset + analysis)</p>
    </div>

    <div class="controls">
      <input id="searchFirm" type="search" placeholder="Hledat firmu…" />
      <select id="platformFilter">
        <option value="ALL">Platforma: všechny</option>
        <option value="Google Maps">Google Maps</option>
        <option value="Firmy.cz">Firmy.cz</option>
        <option value="Facebook">Facebook</option>
        <option value="Other">Other</option>
      </select>

      <select id="rankMode">
        <option value="rating">Ranking: avg rating</option>
        <option value="sentiment">Ranking: avg sentiment</option>
      </select>

      <label class="chk">
        <input id="excludeEnforcement" type="checkbox" />
        <span>Vyřadit “enforcement/debt/mass mail”</span>
      </label>

      <select id="minN">
        <option value="1">Min n: 1</option>
        <option value="3" selected>Min n: 3</option>
        <option value="5">Min n: 5</option>
        <option value="10">Min n: 10</option>
      </select>
    </div>
  </header>

  <main class="grid">
    <section class="card kpis">
      <div class="kpi"><div class="kpiLabel">Firms</div><div id="kpiFirms" class="kpiValue">–</div></div>
      <div class="kpi"><div class="kpiLabel">Reviews</div><div id="kpiReviews" class="kpiValue">–</div></div>
      <div class="kpi"><div class="kpiLabel">With rating</div><div id="kpiWithRating" class="kpiValue">–</div></div>
      <div class="kpi"><div class="kpiLabel">With text</div><div id="kpiWithText" class="kpiValue">–</div></div>
    </section>

    <section class="card">
      <h2>Top firms (dle filtru)</h2>
      <canvas id="chartTopFirms" height="110"></canvas>
      <p id="chartNote" class="muted"></p>
    </section>

    <section class="card">
      <h2>Sentiment distribution</h2>
      <canvas id="chartSentiment" height="110"></canvas>
    </section>

    <section class="card">
      <h2>Top positive themes</h2>
      <canvas id="chartPosThemes" height="110"></canvas>
    </section>

    <section class="card">
      <h2>Top negative themes</h2>
      <canvas id="chartNegThemes" height="110"></canvas>
    </section>

    <section class="card wide">
      <h2>Firm list</h2>
      <div class="tableWrap">
        <table>
          <thead>
            <tr>
              <th>Firm</th>
              <th>Reviews</th>
              <th>Ratings n</th>
              <th>Avg rating</th>
              <th>Scored n</th>
              <th>Avg sentiment</th>
              <th>Platforms</th>
            </tr>
          </thead>
          <tbody id="firmsTbody"></tbody>
        </table>
      </div>
      <p class="muted">Tip: klikni na řádek pro detail (quotes + theme breakdown).</p>
    </section>
  </main>

  <dialog id="firmDialog" class="dialog">
    <div class="dialogHead">
      <div>
        <div id="dlgTitle" class="dlgTitle">—</div>
        <div id="dlgMeta" class="muted">—</div>
      </div>
      <button id="dlgClose" class="btn">Zavřít</button>
    </div>

    <div class="dialogGrid">
      <div class="card">
        <h3>Positive themes</h3>
        <ul id="dlgPosThemes" class="list"></ul>
      </div>
      <div class="card">
        <h3>Negative themes</h3>
        <ul id="dlgNegThemes" class="list"></ul>
      </div>
      <div class="card wide">
        <h3>Representative quotes (positive)</h3>
        <ul id="dlgPosQuotes" class="quotes"></ul>
      </div>
      <div class="card wide">
        <h3>Representative quotes (negative)</h3>
        <ul id="dlgNegQuotes" class="quotes"></ul>
      </div>
    </div>
  </dialog>

  <script src="app.js"></script>
</body>
</html>
